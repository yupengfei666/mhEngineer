(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/main/login"],{"2a88":function(t,n,e){"use strict";e.r(n);var a=e("e52f"),o=e.n(a);for(var i in a)"default"!==i&&function(t){e.d(n,t,(function(){return a[t]}))}(i);n["default"]=o.a},"2b31":function(t,n,e){"use strict";e.r(n);var a=e("c373"),o=e("2a88");for(var i in o)"default"!==i&&function(t){e.d(n,t,(function(){return o[t]}))}(i);e("c27d");var r,c=e("f0c5"),s=Object(c["a"])(o["default"],a["b"],a["c"],!1,null,null,null,!1,a["a"],r);n["default"]=s.exports},aff7:function(t,n,e){"use strict";(function(t){e("db49");a(e("66fd"));var n=a(e("2b31"));function a(t){return t&&t.__esModule?t:{default:t}}wx.__webpack_require_UNI_MP_PLUGIN__=e,t(n.default)}).call(this,e("543d")["createPage"])},c27d:function(t,n,e){"use strict";var a=e("c360"),o=e.n(a);o.a},c360:function(t,n,e){},c373:function(t,n,e){"use strict";var a;e.d(n,"b",(function(){return o})),e.d(n,"c",(function(){return i})),e.d(n,"a",(function(){return a}));var o=function(){var t=this,n=t.$createElement;t._self._c;t._isMounted||(t.e0=function(n){t.showChangeUrl=!0})},i=[]},e52f:function(t,n,e){"use strict";(function(t){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=e("26cb");function o(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),e.push.apply(e,a)}return e}function i(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{};n%2?o(Object(e),!0).forEach((function(n){r(t,n,e[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):o(Object(e)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}))}return t}function r(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}var c=r({data:function(){return{logining:!1,account:"",password:"",buttonloading:!1,showChangeUrl:!1,value:""}},onReady:function(){var n=t.getStorageSync("localUrl");n&&this.setUrl(n),this.value=this.url,this.setUrl(this.value)},onLoad:function(){},computed:(0,a.mapState)(["url","initUrl"]),methods:i(i({},(0,a.mapMutations)(["login","setUrl"])),{},{setInitUrl:function(){t.setStorageSync("localUrl",this.initUrl),this.setUrl(this.initUrl),this.value=this.initUrl,t.showToast({icon:"none",title:"修改成功"})},setTextUrl:function(){t.setStorageSync("localUrl",this.value),this.setUrl(this.value),t.showToast({icon:"none",title:"修改成功"})},inputChange:function(t){var n=t.currentTarget.dataset.key;this[n]=t.detail.value},navBack:function(){t.navigateBack()},toRegist:function(){this.$api.msg("去注册")},bindLogin:function(){this.account.length<1?t.showToast({icon:"none",title:"账号最短为 1 个字符"}):this.password.length<6?t.showToast({icon:"none",title:"密码最短为 6 个字符"}):this.getData()},getData:function(){var n=this;this.buttonloading=!0,t.request({url:this.url+"WeChat/CheckUser",method:"GET",dataType:"json",header:{"content-type":"application/x-www-form-urlencoded",sessionkey:t.getStorageSync("password")},data:{name:this.account,password:this.password,type:1},success:function(e){n.buttonloading=!1,console.log(e),0!==e.data.Code?-1!==e.data.Code?(t.setStorageSync("name",n.account),t.setStorageSync("password",e.data.Data.session),t.setStorageSync("yonghu",e.data.Data.用户),t.setStorageSync("jituan",e.data.Data.集团),t.setStorageSync("gongsi",e.data.Data.公司),t.setStorageSync("zhiwu",e.data.Data.职务),t.setStorageSync("comanyId",e.data.Data.公司ID),n.toMain(n.account)):t.showToast({icon:"none",title:"您不是美恒工程师，不允许登录"}):t.showToast({icon:"none",title:"用户账号或密码不正确"})},fail:function(){n.buttonloading=!1,t.showToast({icon:"none",title:"网络连接失败"})}})},toMain:function(n){this.login(n),t.reLaunch({url:"../main/tab1"})}})},"onLoad",(function(){var n=this;t.getStorage({key:"name",success:function(t){n.account=t.data}}),t.getStorage({key:"password",success:function(){n.forcedLogin&&t.reLaunch({url:"../main/tab1"})}})}));n.default=c}).call(this,e("543d")["default"])}},[["aff7","common/runtime","common/vendor"]]]);